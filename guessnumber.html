<script src="api.js"></script>
<script>
    let ans = createAnswer(1);
    let log = '';
    let times = 0;
    let chN = 0;

    function changeNo(N) {
        log = '';
        times = 0;
        chN = document.getElementById("chooseN").value;
        // console.log(chN);
        ans = createAnswer(chN);
    }

    function doGuess() {
        // alert(ans);
        times++;
        let guessElement = document.getElementById("guess");
        let guess = guessElement.value;
        let result = checkAB(ans, guess);

        if (result == chN + 'A0B') {
            alert('Winner~');
            reset();
        } else if (times == 10) {
            alert('Loser :ans is' + ans);
            reset();
        }
        else {
            alert(result);
        }


        log += times + "." + guess + "=>" + result + "<br>";
        document.getElementById("log").innerHTML = log;
        guessElement.value = '';
        guessElement.focus();
    }

    function reset() {
        if (!confirm('Reset?')) return;

        times = 0;

        let ans = createAnswer(3);
        log = '';
        document.getElementById("log").innerHTML = log;
        guessElement.value = '';
        guessElement.focus();
    }



</script>

<h1>猜數字遊戲</h1>
<hr>

<input type="number" id="guess">
<select id="chooseN" namae="chooseN" onchange="changeNo(this.value)">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
</select>
<input type="button" onclick="doGuess()" value="Guess" id="">
<input type="button" onclick="reset()" value="reset" id="">


<hr>

<div id="log"></div>